# Keylime Push Model Agent Configuration
# UUID modes:
#   "generate" - random UUID at startup
#   "hash_ek"  - derived from TPM EK (stable per-node identity)

[agent]
version = "2.4"
api_versions = "default"
# UUID mode is set via Makefile UUID_MODE variable
uuid = "hash_ek"

# Agent server (not used in push mode but required)
ip = "0.0.0.0"
port = 9002
contact_ip = "0.0.0.0"
contact_port = 9002

# Registrar connection - overridden by env vars
registrar_ip = "127.0.0.1"
registrar_port = 8890

# Push mode verifier URL - overridden by env vars
verifier_url = "https://localhost:8881"

# Push mode authentication (PoP tokens for verifier authorization)
enable_authentication = true

# TLS settings
enable_agent_mtls = true
keylime_dir = "/var/lib/keylime"
server_key = "/var/lib/keylime/certs/client-private.pem"
server_cert = "/var/lib/keylime/certs/client-cert.crt"
trusted_client_ca = "/var/lib/keylime/certs/cacert.crt"

# Attestation interval (push mode)
attestation_interval_seconds = 60
